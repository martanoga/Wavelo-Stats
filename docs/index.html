<!DOCTYPE html>
<html lang="en">

<head>
    <title>Wavelo Stats</title>

    <meta charset="utf-8">
    <!-- it's important for d3.js -->
    <script src="js/lib/angular.min.js"></script>
    <script src="js/lib/d3.min.js"></script>
    <script src="js/lib/nv.d3.min.js"></script>
    <script src="js/lib/angular-nvd3.min.js"></script>
    <link rel="stylesheet" href="js/lib/nv.d3.min.css">
    <script src="js/lib/js-yaml.min.js"></script>

    <script src="js/lib/angular-animate.min.js"></script>
    <script src="js/lib/angular-aria.min.js"></script>
    <script src="js/lib/angular-messages.min.js"></script>
    <link rel="stylesheet" href="js/lib/angular-material.min.css">

    <script src="js/lib/moment-with-locales.min.js"></script>
    <script src="js/lib/moment-timezone-with-data.min.js"></script>
    <script src="js/lib/angular-moment.min.js"></script>

    <script src="js/lib/angular-material.min.js"></script>

    <link rel="stylesheet" href="css/style.css">
    <script src="js/wavelo_stats.js"></script>
    <script src="js/bikes_data_service.js"></script>
</head>

<body>
    <!-- page content -->
    <table id="header">
        <tr>
            <td>
                <a href='https://www.facebook.com/KrakowskaRowerowaMasaKrytyczna' id="logo"><img src='img/masa_logo.png' height="120" widht="120" /></a>
            </td>
            <td>
                <h1> Krakowski Rower Miejski - Statystyki Wypożyczeń </h1>
            </td>
    </table>

    <div ng-app="myApp">
        <div ng-controller="myCtrl">

            <div layout="row" layout-align="space-between center" layout-margin layout-padding>
                <span flex></span>
                <span>Tydzień: </span>
                <md-select ng-model="displayedWeek" placeholder="Tydzień" ng-change="updateData()">
                    <md-option ng-repeat="week in weeks" ng-value="week.value">
                        {{week.description}}
                    </md-option </md-select>
            </div>

            <div ng-show="loading" layout="row" layout-align="center">
                <md-progress-linear md-mode="indeterminate"></md-progress-linear>
            </div>

            <div class=chart>
                <nvd3 options="chart.options" data="chart.data" on-ready="hideProgress"></nvd3>
            </div>

            <div ng-cloak="" class="DetailedDataGrid">

                <md-grid-list md-cols-xs="2" md-cols-sm="4" md-cols-md="6" md-cols-gt-md="8" md-gutter="6px" md-gutter-gt-sm="4px" md-row-height="1:1">



                    <md-grid-tile class="gray" md-colspan="1" ng-repeat="day in dailyStats track by $index" ng-if="day">
                        <md-grid-tile-header>
                            <h3>{{day.nameOfDay}}</h3>
                        </md-grid-tile-header>
                        <div>
                            <div ng-show="day.loading" layout="row" layout-align="center">
                                <md-progress-circular md-mode="indeterminate"></md-progress-circular>
                            </div>

                            <table ng-show="!day.loading">
                                <tr>
                                    <td>Wypożyczono rowery</td>
                                </tr>
                                <tr>
                                    <td class="rentedNumber"> <span md-colors="{color:'primary'}">{{day.totalRentals}}</span></td>
                                </tr>
                                <tr>
                                    <td>razy.</td>
                                </tr>
                                <!--<tr>
                                    <td>Oddano je <span md-colors="{color:'primary'}">{{day.totalReturns}}</span> razy.</td>
                                </tr>-->
                            </table>

                            <!--<div class='disclaimer'>*Dane przybliożone</div> -->
                        </div>

                    </md-grid-tile>

                    <md-grid-tile class="blue" md-rowspan="1" md-colspan="1" md-colspan-sm="1" md-colspan-xs="1" ng-if="currentWeek==displayedWeek">
                        <md-grid-tile-header>
                            <h3>W tej chwili...</h3>
                        </md-grid-tile-header>
                        <table>
                            <tr>
                                <td>Dostępne rowery: <span md-colors="{color:'accent'}">{{availableNow}}</span></td>
                            </tr>
                            <tr>
                                <td>Pożyczone: <span md-colors="{color:'accent'}">{{rentedNow}}</span></td>
                            </tr>
                            <tr ng-if="brokenNow">
                                <td>Uszkodzone: <span md-colors="{color:'accent'}">{{brokenNow}}</span></td>
                            </tr>
                        </table>

                    </md-grid-tile>

                    <!--<md-grid-tile class="yellow">
                        <md-grid-tile-footer>
                            <h3>#3: (1r x 1c)</h3>
                        </md-grid-tile-footer>
                    </md-grid-tile>

                    <md-grid-tile class="blue" md-rowspan="2">
                        <md-grid-tile-footer>
                            <h3>#4: (2r x 1c)</h3>
                        </md-grid-tile-footer>
                    </md-grid-tile>

                    <md-grid-tile class="red" md-rowspan="2" md-colspan="2" md-colspan-sm="1" md-colspan-xs="1">
                        <md-grid-tile-footer>
                            <h3>#5: (2r x 2c)</h3>
                        </md-grid-tile-footer>
                    </md-grid-tile>

                    <md-grid-tile class="green" md-rowspan="2">
                        <md-grid-tile-footer>
                            <h3>#6: (2r x 1c)</h3>
                        </md-grid-tile-footer>
                    </md-grid-tile>-->

                </md-grid-list>
            </div>

            <div class="graph_caption">Statystyki dostępności i użycia rowerów sieci <a href="https://wavelo.pl">Wavelo</a> w Krakowie. Dane uzyskane
                za pośrednictwem <a href="https://app.socialbicycles.com/developer/">api</a> udostępnionego przez <a href="http://socialbicycles.com">socialbikes</a>.</div>


        </div>
    </div>



</body>

</html>